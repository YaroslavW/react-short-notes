# –î–µ–ª–∞–µ–º setInterval –¥–µ–∫–ª–∞—Ä–∞—Ç–∏–≤–Ω—ã–º —Å –ø–æ–º–æ—â—å—é React Hooks #

–ï—Å–ª–∏ –≤—ã –∏–≥—Ä–∞–ª–∏ —Å [React Hooks](https://reactjs.org/docs/hooks-intro.html "React-docs") –±–æ–ª–µ–µ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —á–∞—Å–æ–≤, –≤—ã, –≤–µ—Ä–æ—è—Ç–Ω–æ, —Å—Ç–æ–ª–∫–Ω—É–ª–∏—Å—å —Å –∏–Ω—Ç—Ä–∏–≥—É—é—â–µ–π –ø—Ä–æ–±–ª–µ–º–æ–π: –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ setInterval [–Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç](https://stackoverflow.com/questions/53024496/state-not-updating-when-using-react-state-hook-within-setinterval "StackOverflow - State not updating when using React state hook within setInterval") —Ç–∞–∫, –∫–∞–∫ –≤—ã –æ–∂–∏–¥–∞–µ—Ç–µ.

[–ü–æ —Å–ª–æ–≤–∞–º](https://mobile.twitter.com/ryanflorence/status/1088606583637061634 "Twitter - Ryan Florence") Ryan Florence:

>–£ –º–µ–Ω—è –±—ã–ª–æ –º–Ω–æ–≥–æ –ª—é–¥–µ–π, —É–∫–∞–∑—ã–≤–∞—é—â–∏—Ö –Ω–∞ setInterval —Å —Ö—É–∫–∞–º–∏–∏, –∫–∞–∫ –Ω–∞ —è–π—Ü–µ –Ω–∞ –ª–∏—Ü–µ React.

–ß–µ—Å—Ç–Ω–æ –≥–æ–≤–æ—Ä—è, —è –¥—É–º–∞—é, —á—Ç–æ —É —ç—Ç–∏—Ö –ª—é–¥–µ–π –µ—Å—Ç—å —Å–º—ã—Å–ª. –°–Ω–∞—á–∞–ª–∞ —ç—Ç–æ —Å–±–∏–≤–∞–µ—Ç —Å —Ç–æ–ª–∫—É.

–ù–æ —è —Ç–∞–∫–∂–µ –ø—Ä–∏—à–µ–ª –∫ –≤—ã–≤–æ–¥—É, —á—Ç–æ —ç—Ç–æ –Ω–µ –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ–∫ —Ö—É–∫–æ–≤, –∞ –Ω–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –º–µ–∂–¥—É [–º–æ–¥–µ–ª—å—é –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è React](https://overreacted.io/react-as-a-ui-runtime/ "Dan Abramov - React as a UI Runtime") –∏ `setInterval`. –•—É–∫–∏, –±—É–¥—É—á–∏ –±–ª–∏–∂–µ –∫ –º–æ–¥–µ–ª–∏ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è React, —á–µ–º –∫ –∫–ª–∞—Å—Å–∞–º, –¥–µ–ª–∞—é—Ç —ç—Ç–æ –Ω–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –±–æ–ª–µ–µ –∑–∞–º–µ—Ç–Ω—ã–º

**–ï—Å—Ç—å —Å–ø–æ—Å–æ–± –∑–∞—Å—Ç–∞–≤–∏—Ç—å –∏—Ö —Ä–∞–±–æ—Ç–∞—Ç—å –≤–º–µ—Å—Ç–µ –æ—á–µ–Ω—å —Ö–æ—Ä–æ—à–æ, –Ω–æ —ç—Ç–æ –Ω–µ–º–Ω–æ–≥–æ –Ω–µ –∏–Ω—Ç—É–∏—Ç–∏–≤–Ω–æ –ø–æ–Ω—è—Ç–Ω–æ.**

–í —ç—Ç–æ–º –ø–æ—Å—Ç–µ –º—ã —Ä–∞—Å—Å–º–æ—Ç—Ä–∏–º, –∫–∞–∫ —Å–¥–µ–ª–∞—Ç—å –∏–Ω—Ç–µ—Ä–≤–∞–ª—ã –∏ Hooks, –∏ –∑–∞—Å—Ç–∞–≤–∏—Ç—å –∏–∑ —Ä–∞–±–æ—Ç–∞—Ç—å  –≤–º–µ—Å—Ç–µ, –ø–æ—á–µ–º—É —ç—Ç–æ —Ä–µ—à–µ–Ω–∏–µ –∏–º–µ–µ—Ç —Å–º—ã—Å–ª, –∏ –∫–∞–∫–∏–µ –Ω–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –æ–Ω–æ –º–æ–∂–µ—Ç –¥–∞—Ç—å –≤–∞–º.

<hr>

**–û—Ç–∫–∞–∑ –æ—Ç –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏: —ç—Ç–æ—Ç –ø–æ—Å—Ç –ø–æ—Å–≤—è—â–µ–Ω** ***–ø–∞—Ç–æ–ª–æ–≥–∏—á–µ—Å–∫–æ–º—É —Å–ª—É—á–∞—é***. **–î–∞–∂–µ –µ—Å–ª–∏ API —É–ø—Ä–æ—â–∞–µ—Ç —Å–æ—Ç–Ω—é –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è, –æ–±—Å—É–∂–¥–µ–Ω–∏–µ –≤—Å–µ–≥–¥–∞ –±—É–¥–µ—Ç —Å–æ—Å—Ä–µ–¥–æ—Ç–æ—á–µ–Ω–æ –Ω–∞ —Ç–æ–º, —á—Ç–æ —Å—Ç–∞–ª–æ —Å–ª–æ–∂–Ω–µ–µ.**

–ï—Å–ª–∏ –≤—ã –Ω–æ–≤–∏—á–æ–∫ –≤ Hooks –∏ –Ω–µ –ø–æ–Ω–∏–º–∞–µ—Ç–µ, –æ —á–µ–º –∏–¥–µ—Ç —Ä–µ—á—å, –æ–∑–Ω–∞–∫–æ–º—å—Ç–µ—Å—å [—Å —ç—Ç–∏–º –≤–≤–µ–¥–µ–Ω–∏–µ–º](https://medium.com/@dan_abramov/making-sense-of-react-hooks-fdbde8803889 "Dan Abramov - Making Sense of React Hooks") –∏ [–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–µ–π](https://reactjs.org/docs/hooks-intro.html "React-docs"). –í —ç—Ç–æ–º –ø–æ—Å—Ç–µ –ø—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ—Ç—Å—è, —á—Ç–æ –≤—ã —Ä–∞–±–æ—Ç–∞–ª–∏ —Å Hooks –±–æ–ª–µ–µ —á–∞—Å–∞.

<hr>

## –ü—Ä–æ—Å—Ç–æ –ø–æ–∫–∞–∂–∏ –º–Ω–µ –∫–æ–¥ ##

–ë–µ–∑ –ª–∏—à–Ω–∏—Ö —Å–ª–æ–≤, –≤–æ—Ç —Å—á–µ—Ç—á–∏–∫, –∫–æ—Ç–æ—Ä—ã–π —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç—Å—è –∫–∞–∂–¥—É—é —Å–µ–∫—É–Ω–¥—É:

```javascript
import React, { useState, useEffect, useRef } from 'react';

function Counter() {
  let [count, setCount] = useState(0);

  useInterval(() => {
    // Your custom logic here
    setCount(count + 1);
  }, 1000);

  return <h1>{count}</h1>;
}
```
–ó–¥–µ—Å—å [CodeSandbox demo.](https://codesandbox.io/s/105x531vkq "CodeSandbox").

–≠—Ç–æ—Ç useInterval –Ω–µ —è–≤–ª—è–µ—Ç—Å—è –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–º React Hook; —ç—Ç–æ [custom Hook](https://reactjs.org/docs/hooks-custom.html), –∫–æ—Ç–æ—Ä—ã–π —è –Ω–∞–ø–∏—Å–∞–ª:

```javascript
import React, { useState, useEffect, useRef } from 'react';

function useInterval(callback, delay) {
  const savedCallback = useRef();

  // Remember the latest callback.
  useEffect(() => {
    savedCallback.current = callback;
  }, [callback]);

  // Set up the interval.
  useEffect(() => {
    function tick() {
      savedCallback.current();
    }
    if (delay !== null) {
      let id = setInterval(tick, delay);
      return () => clearInterval(id);
    }
  }, [delay]);
}
```
–ó–¥–µ—Å—å [CodeSandbox demo.](https://codesandbox.io/s/105x531vkq "CodeSandbox").

**–ú–æ–π `useInterval` Hook —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –∏–Ω—Ç–µ—Ä–≤–∞–ª –∏ –æ—á–∏—â–∞–µ—Ç –µ–≥–æ –ø–æ—Å–ª–µ —Ä–∞–∑–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏—è.** –≠—Ç–æ –∫–æ–º–±–∏–Ω–∞—Ü–∏—è `setInterval` –∏ `clearInterval`, –ø—Ä–∏–≤—è–∑–∞–Ω–Ω–∞—è –∫ –∂–∏–∑–Ω–µ–Ω–Ω–æ–º—É —Ü–∏–∫–ª—É –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞.

–ù–µ —Å—Ç–µ—Å–Ω—è–π—Ç–µ—Å—å —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å, –≤—Å—Ç–∞–≤–∏—Ç—å –µ–≥–æ –≤ —Å–≤–æ–π –ø—Ä–æ–µ–∫—Ç –∏–ª–∏ –ø–æ—Å—Ç–∞–≤–∏—Ç—å –Ω–∞ npm.

**–ï—Å–ª–∏ –≤–∞–º –≤—Å–µ —Ä–∞–≤–Ω–æ, –∫–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç, –≤—ã –º–æ–∂–µ—Ç–µ –ø–µ—Ä–µ—Å—Ç–∞—Ç—å —á–∏—Ç–∞—Ç—å —Å–µ–π—á–∞—Å! –û—Å—Ç–∞–ª—å–Ω–∞—è —á–∞—Å—Ç—å –ø–æ—Å—Ç–∞ –≤ –±–ª–æ–≥–µ –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–∞ –¥–ª—è –ª—é–¥–µ–π, –∫–æ—Ç–æ—Ä—ã–µ –≥–æ—Ç–æ–≤—ã –≥–ª—É–±–æ–∫–æ –ø–æ–≥—Ä—É–∑–∏—Ç—å—Å—è –≤ React Hooks.**

<hr/>

## –ß–µ–≥–æ –∂–¥–∞—Ç—å?! ##

–Ø –∑–Ω–∞—é, –æ —á–µ–º –≤—ã –¥—É–º–∞–µ—Ç–µ:

>–î—ç–Ω, —ç—Ç–æ—Ç –∫–æ–¥ –Ω–µ –∏–º–µ–µ—Ç –Ω–∏–∫–∞–∫–æ–≥–æ —Å–º—ã—Å–ª–∞. –ß—Ç–æ —Å–ª—É—á–∏–ª–æ—Å—å —Å ¬´–ü—Ä–æ—Å—Ç–æ JavaScript¬ª? –ü—Ä–∏–∑–Ω–∞–π—Ç–µ, —á—Ç–æ –†–µ–∞–∫—Ç –ø–µ—Ä–µ–ø—Ä—ã–≥–Ω—É–ª –∞–∫—É–ª—É —Å Hooks (–ö—Ä—é—á–∫–∞–º–∏)!

**–Ø —Ç–æ–∂–µ —Ç–∞–∫ –¥—É–º–∞–ª, –Ω–æ –ø–µ—Ä–µ–¥—É–º–∞–ª –∏ —Å–æ–±–∏—Ä–∞—é—Å—å –∏–∑–º–µ–Ω–∏—Ç—å —Å–≤–æ–µ –º–Ω–µ–Ω–∏–µ.** –ü—Ä–µ–∂–¥–µ —á–µ–º –æ–±—ä—è—Å–Ω–∏—Ç—å, –ø–æ—á–µ–º—É —ç—Ç–æ—Ç –∫–æ–¥ –∏–º–µ–µ—Ç —Å–º—ã—Å–ª, —è —Ö–æ—á—É –ø–æ–∫–∞–∑–∞—Ç—å, –Ω–∞ —á—Ç–æ –æ–Ω —Å–ø–æ—Å–æ–±–µ–Ω.

<hr/>

## –ü–æ—á–µ–º—É `useInterval ()` - –ª—É—á—à–∏–π API ##

–ù–∞–ø–æ–º–Ω—é, —á—Ç–æ –º–æ–π `useInterval` Hook –ø—Ä–∏–Ω–∏–º–∞–µ—Ç —Ñ—É–Ω–∫—Ü–∏—é –∏ –∑–∞–¥–µ—Ä–∂–∫—É:

```javascript
  useInterval(() => {
    // ...
  }, 1000);
```
–≠—Ç–æ –æ—á–µ–Ω—å –ø–æ—Ö–æ–∂–µ –Ω–∞ setInterval:

```javascript
  setInterval(() => {
    // ...
  }, 1000);
```
**–¢–∞–∫ –ø–æ—á–µ–º—É –±—ã –ø—Ä–æ—Å—Ç–æ –Ω–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å setInterval –Ω–∞–ø—Ä—è–º—É—é?**

–ü–æ–Ω–∞—á–∞–ª—É —ç—Ç–æ –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ–æ—á–µ–≤–∏–¥–Ω–æ, –Ω–æ —Ä–∞–∑–Ω–∏—Ü–∞ –º–µ–∂–¥—É –∏–∑–≤–µ—Å—Ç–Ω—ã–º –≤–∞–º `setInterval` –∏ –º–æ–∏–º —Ö–∞–∫–æ–º `useInterval` –∑–∞–∫–ª—é—á–∞–µ—Ç—Å—è –≤ —Ç–æ–º, —á—Ç–æ –µ–≥–æ **–∞—Ä–≥—É–º–µ–Ω—Ç—ã —è–≤–ª—è—é—Ç—Å—è ¬´–¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–º–∏¬ª**.

–Ø –ø—Ä–æ–∏–ª–ª—é—Å—Ç—Ä–∏—Ä—É—é —ç—Ç–æ –Ω–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º –ø—Ä–∏–º–µ—Ä–µ.

–î–æ–ø—É—Å—Ç–∏–º, –º—ã —Ö–æ—Ç–∏–º, —á—Ç–æ–±—ã –∑–∞–¥–µ—Ä–∂–∫–∞ –∏–Ω—Ç–µ—Ä–≤–∞–ª–∞ –±—ã–ª–∞ —Ä–µ–≥—É–ª–∏—Ä—É–µ–º–æ–π:

![react-counter](img/counter_delay-35e4f35a8585255b11c090aed9f72433.gif)

–ù–µ—Å–º–æ—Ç—Ä—è –Ω–∞ —Ç–æ, —á—Ç–æ –≤—ã –Ω–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ —É–ø—Ä–∞–≤–ª—è–µ—Ç–µ –∑–∞–¥–µ—Ä–∂–∫–æ–π —Å –ø–æ–º–æ—â—å—é –≤–≤–æ–¥–∞, –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø–æ–ª–µ–∑–Ω–æ–π - –Ω–∞–ø—Ä–∏–º–µ—Ä, —Ä–µ–∂–µ –∑–∞–ø—Ä–∞—à–∏–≤–∞—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è AJAX, –ø–æ–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–µ—Ä–µ–∫–ª—é—á–∞–µ—Ç—Å—è –Ω–∞ –¥—Ä—É–≥—É—é –≤–∫–ª–∞–¥–∫—É.

–ò—Ç–∞–∫, –∫–∞–∫ –±—ã –≤—ã —Å–¥–µ–ª–∞–ª–∏ —ç—Ç–æ —Å setInterval –≤ –∫–ª–∞—Å—Å–µ? –Ø –∑–∞–∫–æ–Ω—á–∏–ª —Å —ç—Ç–∏–º:

```javascript
class Counter extends React.Component {
  state = {
    count: 0,
    delay: 1000,
  };

  componentDidMount() {
    this.interval = setInterval(this.tick, this.state.delay);
  }
  componentDidUpdate(prevProps, prevState) {
    if (prevState.delay !== this.state.delay) {
      clearInterval(this.interval);
      this.interval = setInterval(this.tick, this.state.delay);
    }
  }
  componentWillUnmount() {
    clearInterval(this.interval);
  }
  tick = () => {
    this.setState({
      count: this.state.count + 1
    });
  }

  handleDelayChange = (e) => {
    this.setState({ delay: Number(e.target.value) });
  }

  render() {
    return (
      <>
        <h1>{this.state.count}</h1>
        <input value={this.state.delay} onChange={this.handleDelayChange} />
      </>
    );
  }
}
```
–ó–¥–µ—Å—å [CodeSandbox demo.](https://codesandbox.io/s/mz20m600mp "CodeSandbox").

–≠—Ç–æ –Ω–µ —Ç–∞–∫ —É–∂ –ø–ª–æ—Ö–æ!

–ö–∞–∫ –≤—ã–≥–ª—è–¥–∏—Ç –≤–µ—Ä—Å–∏—è Hook?

ü•Åü•Åü•Å
```javascript
function Counter() {
  let [count, setCount] = useState(0);
  let [delay, setDelay] = useState(1000);

  useInterval(() => {
    // Your custom logic here
    setCount(count + 1);
  }, delay);

  function handleDelayChange(e) {
    setDelay(Number(e.target.value));
  }

  return (
    <>
      <h1>{count}</h1>
      <input value={delay} onChange={handleDelayChange} />
    </>
  );
}
```
–ó–¥–µ—Å—å [CodeSandbox demo.](https://codesandbox.io/s/329jy81rlm "CodeSandbox").

–î–∞, —ç—Ç–æ _–≤—Å–µ, —á—Ç–æ –Ω—É–∂–Ω–æ_.

–í –æ—Ç–ª–∏—á–∏–µ –æ—Ç –≤–µ—Ä—Å–∏–∏ –∫–ª–∞—Å—Å–∞, –≤ ¬´–æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏¬ª –ø—Ä–∏–º–µ—Ä–∞ –ª–æ–≤—É—à–∫–∏ `useInterval` –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç —Ä–∞–∑—Ä—ã–≤ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º–æ–π –∑–∞–¥–µ—Ä–∂–∫–∏:

```javascript
  // Constant delay
  useInterval(() => {
    setCount(count + 1);
  }, 1000);

  // Adjustable delay
  useInterval(() => {
    setCount(count + 1);
  }, delay);
```
–ö–æ–≥–¥–∞ `useInterval` Hook –≤–∏–¥–∏—Ç –¥—Ä—É–≥—É—é –∑–∞–¥–µ—Ä–∂–∫—É, –æ–Ω —Å–Ω–æ–≤–∞ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –∏–Ω—Ç–µ—Ä–≤–∞–ª.

**–í–º–µ—Å—Ç–æ —Ç–æ–≥–æ —á—Ç–æ–±—ã –ø–∏—Å–∞—Ç—å –∫–æ–¥ –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –∏** ***–æ—á–∏—Å—Ç–∫–∏***  **–∏–Ω—Ç–µ—Ä–≤–∞–ª–∞, —è –º–æ–≥—É –æ–±—ä—è–≤–∏—Ç—å –∏–Ω—Ç–µ—Ä–≤–∞–ª —Å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–π –∑–∞–¥–µ—Ä–∂–∫–æ–π - –∏ –Ω–∞—à `useInterval` Hook –¥–µ–ª–∞–µ—Ç —ç—Ç–æ –≤–æ–∑–º–æ–∂–Ω—ã–º.**

–ß—Ç–æ –µ—Å–ª–∏ —è —Ö–æ—á—É _–≤—Ä–µ–º–µ–Ω–Ω–æ –ø—Ä–∏–æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å_ —Å–≤–æ–π –∏–Ω—Ç–µ—Ä–≤–∞–ª? –Ø –º–æ–≥—É —Å–¥–µ–ª–∞—Ç—å —ç—Ç–æ —Å–æ state —Ç–æ–∂–µ:

```javascript
  const [delay, setDelay] = useState(1000);
  const [isRunning, setIsRunning] = useState(true);

  useInterval(() => {
    setCount(count + 1);
  }, isRunning ? delay : null);
```
–ó–¥–µ—Å—å [CodeSandbox demo.](https://codesandbox.io/s/l240mp2pm7 "CodeSandbox").

–≠—Ç–æ —Ç–æ, —á—Ç–æ –≤–¥–æ—Ö–Ω–æ–≤–ª—è–µ—Ç –º–µ–Ω—è –Ω–∞ Hooks –∏ React —Å–Ω–æ–≤–∞ –∏ —Å–Ω–æ–≤–∞. –ú—ã –º–æ–∂–µ–º –æ–±–µ—Ä–Ω—É—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –∏–º–ø–µ—Ä–∞—Ç–∏–≤–Ω—ã–µ API –∏ —Å–æ–∑–¥–∞—Ç—å –¥–µ–∫–ª–∞—Ä–∞—Ç–∏–≤–Ω—ã–µ API, –±–æ–ª–µ–µ –±–ª–∏–∑–∫–æ –≤—ã—Ä–∞–∂–∞—é—â–∏–µ –Ω–∞—à–∏ –Ω–∞–º–µ—Ä–µ–Ω–∏—è. –ö–∞–∫ –∏ –≤ —Å–ª—É—á–∞–µ —Å —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–æ–º, –º—ã –º–æ–∂–µ–º –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ **–æ–ø–∏—Å—ã–≤–∞—Ç—å –ø—Ä–æ—Ü–µ—Å—Å –≤–æ –≤—Å–µ –º–æ–º–µ–Ω—Ç—ã –≤—Ä–µ–º–µ–Ω–∏** –≤–º–µ—Å—Ç–æ —Ç–æ–≥–æ, —á—Ç–æ–±—ã –∞–∫–∫—É—Ä–∞—Ç–Ω–æ –≤—ã–¥–∞–≤–∞—Ç—å –∫–æ–º–∞–Ω–¥—ã –¥–ª—è –µ–≥–æ –º–∞–Ω–∏–ø—É–ª–∏—Ä–æ–≤–∞–Ω–∏—è.

<hr/>

–Ø –Ω–∞–¥–µ—é—Å—å, —á—Ç–æ –±–ª–∞–≥–æ–¥–∞—Ä—è —ç—Ç–æ–º—É –≤—ã –ø—Ä–æ–¥–∞–µ—Ç–µ –Ω–∞ `useInterval ()` Hook, –∫–æ—Ç–æ—Ä—ã–π —è–≤–ª—è–µ—Ç—Å—è –±–æ–ª–µ–µ –ø—Ä–∏—è—Ç–Ω—ã–º API - –ø–æ –∫—Ä–∞–π–Ω–µ–π –º–µ—Ä–µ, –∫–æ–≥–¥–∞ –º—ã –¥–µ–ª–∞–µ–º —ç—Ç–æ –∏–∑ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞.

**–ù–æ –ø–æ—á–µ–º—É –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `setInterval ()` –∏ `clearInterval ()` —Ä–∞–∑–¥—Ä–∞–∂–∞–µ—Ç —Ö—É–∫–∏?** –î–∞–≤–∞–π—Ç–µ –≤–µ—Ä–Ω–µ–º—Å—è –∫ –Ω–∞—à–µ–º—É –ø—Ä–∏–º–µ—Ä—É –∏ –ø–æ–ø—Ä–æ–±—É–µ–º —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –µ–≥–æ –≤—Ä—É—á–Ω—É—é.

<hr/>

## –ü–µ—Ä–≤–∞—è –ø–æ–ø—ã—Ç–∫–∞ ##

–Ø –Ω–∞—á–Ω—É —Å –ø—Ä–æ—Å—Ç–æ–≥–æ –ø—Ä–∏–º–µ—Ä–∞, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–æ—Å—Ç–æ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –∏—Å—Ö–æ–¥–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ:

```javascript
function Counter() {
  const [count, setCount] = useState(0);
  return <h1>{count}</h1>;
}
```
–¢–µ–ø–µ—Ä—å —è —Ö–æ—á—É –∏–Ω—Ç–µ—Ä–≤–∞–ª, –∫–æ—Ç–æ—Ä—ã–π —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç –µ–≥–æ –∫–∞–∂–¥—É—é —Å–µ–∫—É–Ω–¥—É. –≠—Ç–æ [–ø–æ–±–æ—á–Ω—ã–π —ç—Ñ—Ñ–µ–∫—Ç](https://reactjs.org/docs/hooks-effect.html#effects-with-cleanup "React-docs Effects with Cleanup"), –∫–æ—Ç–æ—Ä—ã–π [—Ç—Ä–µ–±—É–µ—Ç –æ—á–∏—Å—Ç–∫–∏](https://reactjs.org/docs/hooks-effect.html#effects-with-cleanup "React-docs Effects with Cleanup"), –ø–æ—ç—Ç–æ–º—É —è —Å–æ–±–∏—Ä–∞—é—Å—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Effect () –∏ –≤–µ—Ä–Ω—É—Ç—å —Ñ—É–Ω–∫—Ü–∏—é –æ—á–∏—Å—Ç–∫–∏:

```javascript
function Counter() {
  let [count, setCount] = useState(0);

  useEffect(() => {
    let id = setInterval(() => {
      setCount(count + 1);
    }, 1000);
    return () => clearInterval(id);
  });

  return <h1>{count}</h1>;
}
```
–ó–¥–µ—Å—å [CodeSandbox demo.](https://codesandbox.io/s/7wlxk1k87j "CodeSandbox").

–ö–∞–∂–µ—Ç—Å—è –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ø—Ä–æ—Å—Ç–æ? –≠—Ç–æ—Ç –≤–∏–¥ —Ä–∞–±–æ—Ç.

**–û–¥–Ω–∞–∫–æ, —ç—Ç–æ—Ç –∫–æ–¥ –∏–º–µ–µ—Ç —Å—Ç—Ä–∞–Ω–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ.**

React –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –ø–æ–≤—Ç–æ—Ä–Ω–æ –ø—Ä–∏–º–µ–Ω—è–µ—Ç —ç—Ñ—Ñ–µ–∫—Ç—ã –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ —Ä–µ–Ω–¥–µ—Ä–∞. –≠—Ç–æ —Å–¥–µ–ª–∞–Ω–æ –Ω–∞–º–µ—Ä–µ–Ω–Ω–æ –∏ –ø–æ–º–æ–≥–∞–µ—Ç –∏–∑–±–µ–∂–∞—Ç—å [—Ü–µ–ª–æ–≥–æ –∫–ª–∞—Å—Å–∞ –æ—à–∏–±–æ–∫](https://reactjs.org/docs/hooks-effect.html#explanation-why-effects-run-on-each-update "React-docs Explanation: Why Effects Run on Each Update"), –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—â–∏—Ö –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö –∫–ª–∞—Å—Å–∞ React.

–û–±—ã—á–Ω–æ —ç—Ç–æ —Ö–æ—Ä–æ—à–æ, –ø–æ—Ç–æ–º—É —á—Ç–æ –º–Ω–æ–≥–∏–µ API-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã –ø–æ–¥–ø–∏—Å–∫–∏ –º–æ–≥—É—Ç —É–¥–∞—á–Ω–æ —É–¥–∞–ª–∏—Ç—å —Å—Ç–∞—Ä—ã–π –∏ –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π –ø—Ä–æ—Å–ª—É—à–∏–≤–∞—Ç–µ–ª—å –≤ –ª—é–±–æ–µ –≤—Ä–µ–º—è. –û–¥–Ω–∞–∫–æ `setInterval` –Ω–µ —è–≤–ª—è–µ—Ç—Å—è –æ–¥–Ω–∏–º –∏–∑ –Ω–∏—Ö. –ö–æ–≥–¥–∞ –º—ã –∑–∞–ø—É—Å–∫–∞–µ–º `clearInterval` –∏ `setInterval`, –∏—Ö —Å—Ä–æ–∫–∏ –º–µ–Ω—è—é—Ç—Å—è. –ï—Å–ª–∏ –º—ã —Å–ª–∏—à–∫–æ–º —á–∞—Å—Ç–æ –ø–µ—Ä–µ—Ä–∏—Å–æ–≤—ã–≤–∞–µ–º –∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ –ø—Ä–∏–º–µ–Ω—è–µ–º —ç—Ñ—Ñ–µ–∫—Ç—ã, –∏–Ω—Ç–µ—Ä–≤–∞–ª –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –±—É–¥–µ—Ç –ø–æ–ª—É—á–µ–Ω!

–ú—ã –º–æ–∂–µ–º —É–≤–∏–¥–µ—Ç—å –æ—à–∏–±–∫—É, –ø–µ—Ä–µ—Ä–∏—Å–æ–≤–∞–≤ –Ω–∞—à –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –≤ _–º–µ–Ω—å—à–∏–π_ –∏–Ω—Ç–µ—Ä–≤–∞–ª:

```javascript
setInterval(() => {
  // Re-renders and re-applies Counter's effects
  // which in turn causes it to clearInterval()
  // and setInterval() before that interval fires.
  ReactDOM.render(<Counter />, rootElement);
}, 100);
```
–ó–¥–µ—Å—å [CodeSandbox demo.](https://codesandbox.io/s/9j86r218y4 "CodeSandbox").

<hr/>

## –í—Ç–æ—Ä–∞—è –ø–æ–ø—ã—Ç–∫–∞ ##

–í–æ–∑–º–æ–∂–Ω–æ, –≤—ã –∑–Ω–∞–µ—Ç–µ, —á—Ç–æ `useEffect ()` –ø–æ–∑–≤–æ–ª—è–µ—Ç –Ω–∞–º [–æ—Ç–∫–∞–∑–∞—Ç—å—Å—è](https://reactjs.org/docs/hooks-effect.html#tip-optimizing-performance-by-skipping-effects "React-docs Tip: Optimizing Performance by Skipping Effects") –æ—Ç –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è —ç—Ñ—Ñ–µ–∫—Ç–æ–≤. –í—ã –º–æ–∂–µ—Ç–µ —É–∫–∞–∑–∞—Ç—å –º–∞—Å—Å–∏–≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –≤ –∫–∞—á–µ—Å—Ç–≤–µ –≤—Ç–æ—Ä–æ–≥–æ –∞—Ä–≥—É–º–µ–Ω—Ç–∞, –∏ React –ø–æ–≤—Ç–æ—Ä–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç —ç—Ñ—Ñ–µ–∫—Ç, —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ —á—Ç–æ-—Ç–æ –≤ —ç—Ç–æ–º –º–∞—Å—Å–∏–≤–µ –∏–∑–º–µ–Ω–∏—Ç—Å—è:

```javascript
useEffect(() => {
  document.title = `You clicked ${count} times`;
}, [count]);
```
–ö–æ–≥–¥–∞ –º—ã —Ö–æ—Ç–∏–º –∑–∞–ø—É—Å—Ç–∏—Ç—å —ç—Ñ—Ñ–µ–∫—Ç —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ –∏ –æ—á–∏—Å—Ç–∫—É –ø—Ä–∏ —Ä–∞–∑–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏, –º—ã –º–æ–∂–µ–º –ø–µ—Ä–µ–¥–∞—Ç—å –ø—É—Å—Ç–æ–π `[]` –º–∞—Å—Å–∏–≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π.

–û–¥–Ω–∞–∫–æ —ç—Ç–æ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ –æ—à–∏–±–æ–∫, –µ—Å–ª–∏ –≤—ã –Ω–µ –æ—á–µ–Ω—å —Ö–æ—Ä–æ—à–æ –∑–Ω–∞–∫–æ–º—ã —Å –∑–∞–º—ã–∫–∞–Ω–∏—è–º–∏ JavaScript. –ú—ã —Å–æ–±–∏—Ä–∞–µ–º—Å—è —Å–¥–µ–ª–∞—Ç—å —ç—Ç—É –æ—à–∏–±–∫—É –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å! (–ú—ã —Ç–∞–∫–∂–µ —Å–æ–∑–¥–∞–µ–º –ø—Ä–∞–≤–∏–ª–æ –¥–ª—è [lint rile](https://github.com/facebook/react/pull/14636 "Add eslint-plugin-react-hooks/exhaustive-deps rule to check stale closure dependencies") —É—Å—Ç—Ä–∞–Ω–µ–Ω–∏—è –æ—à–∏–±–æ–∫ –Ω–∞ —Ä–∞–Ω–Ω–µ–π —Å—Ç–∞–¥–∏–∏, –Ω–æ –æ–Ω–æ –µ—â–µ –Ω–µ —Å–æ–≤—Å–µ–º –≥–æ—Ç–æ–≤–æ.)

–í –ø–µ—Ä–≤–æ–π –ø–æ–ø—ã—Ç–∫–µ –Ω–∞—à–∞ –ø—Ä–æ–±–ª–µ–º–∞ –∑–∞–∫–ª—é—á–∞–ª–∞—Å—å –≤ —Ç–æ–º, —á—Ç–æ –ø—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–º –∑–∞–ø—É—Å–∫–µ —ç—Ñ—Ñ–µ–∫—Ç–æ–≤ —Ç–∞–π–º–µ—Ä –æ—á–∏—â–∞–ª—Å—è —Å–ª–∏—à–∫–æ–º —Ä–∞–Ω–æ. –ú—ã –º–æ–∂–µ–º –ø–æ–ø—ã—Ç–∞—Ç—å—Å—è –∏—Å–ø—Ä–∞–≤–∏—Ç—å —ç—Ç–æ, –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –ø–æ–≤—Ç–æ—Ä—è—è –∏—Ö

```javascript
function Counter() {
  let [count, setCount] = useState(0);

  useEffect(() => {
    let id = setInterval(() => {
      setCount(count + 1);
    }, 1000);
    return () => clearInterval(id);
  }, []);

  return <h1>{count}</h1>;
}
```
–û–¥–Ω–∞–∫–æ —Ç–µ–ø–µ—Ä—å –Ω–∞—à —Å—á–µ—Ç—á–∏–∫ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –¥–æ 1 –∏ –æ—Å—Ç–∞–µ—Ç—Å—è —Ç–∞–º. –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å  [–±–∞–≥ –≤ –¥–µ–π—Å—Ç–≤–∏–∏](https://codesandbox.io/s/jj0mk6y683 "CodeSandbox")

–ß—Ç–æ —Å–ª—É—á–∏–ª–æ—Å—å?!

**–ü—Ä–æ–±–ª–µ–º–∞ –∑–∞–∫–ª—é—á–∞–µ—Ç—Å—è –≤ —Ç–æ–º, —á—Ç–æ `useEffect` –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç `count` –æ—Ç –ø–µ—Ä–≤–æ–≥–æ —Ä–µ–Ω–¥–µ—Ä–∞.** –û–Ω —Ä–∞–≤–µ–Ω `0`. –ú—ã –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –ø—Ä–∏–º–µ–Ω—è–µ–º —ç—Ñ—Ñ–µ–∫—Ç –ø–æ–≤—Ç–æ—Ä–Ω–æ, –ø–æ—ç—Ç–æ–º—É –∑–∞–º—ã–∫–∞–Ω–∏–µ –≤ `setInterval` –≤—Å–µ–≥–¥–∞ —Å—Å—ã–ª–∞–µ—Ç—Å—è –Ω–∞ —Å—á–µ—Ç –∏–∑ –ø–µ—Ä–≤–æ–≥–æ —Ä–µ–Ω–¥–µ—Ä–∞, –∞ `count + 1` –≤—Å–µ–≥–¥–∞ —Ä–∞–≤–µ–Ω `1`. –£–ø—Å –∏ –ø—Ä–∏–ø–ª—ã–ª–∏!

**–Ø —Å–ª—ã—à—É, –∫–∞–∫ —Ç–≤–æ–∏ –∑—É–±—ã —Å–∫—Ä–∏–ø—è—Ç. –ö—Ä—é—á–∫–∏ —Ç–∞–∫ —Ä–∞–∑–¥—Ä–∞–∂–∞—é—Ç, –≤–µ—Ä–Ω–æ?**

[–û–¥–∏–Ω –∏–∑ —Å–ø–æ—Å–æ–±–æ–≤](https://codesandbox.io/s/j379jxrzjy "CodeSandbox") –∏—Å–ø—Ä–∞–≤–∏—Ç—å —ç—Ç–æ - –∑–∞–º–µ–Ω–∏—Ç—å `setCount (count + 1)` –Ω–∞ —Ñ–æ—Ä–º—É ¬´–æ–±–Ω–æ–≤–ª–µ–Ω–∏—è¬ª, —Ç–∞–∫—É—é –∫–∞–∫ `setCount (c => c + 1)`. –û–Ω –≤—Å–µ–≥–¥–∞ –º–æ–∂–µ—Ç –ø—Ä–æ—á–∏—Ç–∞—Ç—å –Ω–æ–≤–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –¥–ª—è —ç—Ç–æ–π –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π. –ù–æ —ç—Ç–æ –Ω–µ –ø–æ–º–æ–∂–µ—Ç –≤–∞–º, –Ω–∞–ø—Ä–∏–º–µ—Ä, —á–∏—Ç–∞—Ç—å —Å–≤–µ–∂–∏–µ —Ä–µ–∫–≤–∏–∑–∏—Ç—ã (`props`).

[–î—Ä—É–≥–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ](https://codesandbox.io/s/00o9o95jyv "CodeSandbox") –∑–∞–∫–ª—é—á–∞–µ—Ç—Å—è –≤ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ `useReducer ()`. –¢–∞–∫–æ–π –ø–æ–¥—Ö–æ–¥ –¥–∞–µ—Ç –≤–∞–º –±–æ–ª—å—à–µ –≥–∏–±–∫–æ—Å—Ç–∏. –í–Ω—É—Ç—Ä–∏ —Ä–µ–¥—É–∫—Ç–æ—Ä–∞ —É –≤–∞—Å –µ—Å—Ç—å –¥–æ—Å—Ç—É–ø –∫–∞–∫ –∫ —Ç–µ–∫—É—â–µ–º—É —Å–æ—Å—Ç–æ—è–Ω–∏—é, —Ç–∞–∫ –∏ –∫ –Ω–æ–≤—ã–º —Ä–µ–∫–≤–∏–∑–∏—Ç–∞–º. –°–∞–º–∞ —Ñ—É–Ω–∫—Ü–∏—è `dispatch` –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –º–µ–Ω—è–µ—Ç—Å—è, –ø–æ—ç—Ç–æ–º—É –≤—ã –º–æ–∂–µ—Ç–µ –∑–∞–∫–∞—á–∏–≤–∞—Ç—å –≤ –Ω–µ–µ –¥–∞–Ω–Ω—ã–µ –∏–∑ –ª—é–±–æ–≥–æ –∑–∞–º—ã–∫–∞–Ω–∏—è. –û–¥–Ω–æ –∏–∑ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π `useReducer ()` –∑–∞–∫–ª—é—á–∞–µ—Ç—Å—è –≤ —Ç–æ–º, —á—Ç–æ –≤—ã –ø–æ–∫–∞ –Ω–µ –º–æ–∂–µ—Ç–µ —Å–æ–∑–¥–∞–≤–∞—Ç—å –ø–æ–±–æ—á–Ω—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã. (–û–¥–Ω–∞–∫–æ –≤—ã –º–æ–∂–µ—Ç–µ –≤–µ—Ä–Ω—É—Ç—å –Ω–æ–≤–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ - –≤—ã–∑—ã–≤–∞—è –Ω–µ–∫–æ—Ç–æ—Ä—ã–π —ç—Ñ—Ñ–µ–∫—Ç.)

**–ù–æ –ø–æ—á–µ–º—É —ç—Ç–æ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –Ω–∞—Å—Ç–æ–ª—å–∫–æ –∑–∞–ø—É—Ç–∞–Ω–Ω—ã–º?**

<hr/>

## –ù–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –∏–º–ø–µ–¥–∞–Ω—Å–∞ ##

–≠—Ç–æ—Ç —Ç–µ—Ä–º–∏–Ω –∏–Ω–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è, –∏ [Phil Haack](https://haacked.com/archive/2004/06/15/impedance-mismatch.aspx/ "Haacked.com") –æ–±—ä—è—Å–Ω—è–µ—Ç —ç—Ç–æ —Ç–∞–∫:

>–ú–æ–∂–Ω–æ —Å–∫–∞–∑–∞—Ç—å, —á—Ç–æ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö —Å –ú–∞—Ä—Å–∞, –∞ –æ–±—ä–µ–∫—Ç—ã —Å –í–µ–Ω–µ—Ä—ã. –ë–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω—ã–º –æ–±—Ä–∞–∑–æ–º –Ω–∞ –æ–±—ä–µ–∫—Ç–Ω—ã–µ –º–æ–¥–µ–ª–∏. –≠—Ç–æ –ø–æ—Ö–æ–∂–µ –Ω–∞ –ø–æ–ø—ã—Ç–∫—É —Å–æ–µ–¥–∏–Ω–∏—Ç—å —Å–µ–≤–µ—Ä–Ω—ã–µ –ø–æ–ª—é—Å–∞ –¥–≤—É—Ö –º–∞–≥–Ω–∏—Ç–æ–≤.

–ù–∞—à–µ ¬´–Ω–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –∏–º–ø–µ–¥–∞–Ω—Å–∞¬ª –Ω–µ –º–µ–∂–¥—É –±–∞–∑–∞–º–∏ –¥–∞–Ω–Ω—ã—Ö –∏ –æ–±—ä–µ–∫—Ç–∞–º–∏. –û–Ω –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –º–µ–∂–¥—É –º–æ–¥–µ–ª—å—é –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è React –∏ –∏–º–ø–µ—Ä–∞—Ç–∏–≤–Ω—ã–º `setInterval` API.

**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç React –º–æ–∂–µ—Ç –±—ã—Ç—å —Å–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω –Ω–∞ –Ω–µ–∫–æ—Ç–æ—Ä–æ–µ –≤—Ä–µ–º—è –∏ –ø—Ä–æ—Ö–æ–¥–∏—Ç—å —á–µ—Ä–µ–∑ –º–Ω–æ–∂–µ—Å—Ç–≤–æ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Å–æ—Å—Ç–æ—è–Ω–∏–π, –Ω–æ –µ–≥–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ –æ–ø–∏—Å—ã–≤–∞–µ—Ç –∏—Ö –≤—Å–µ —Å—Ä–∞–∑—É.**

```javascript
  // Describes every render
  return <h1>{count}</h1>
  ```
  –•—É–∫–∏ –ø–æ–∑–≤–æ–ª—è—é—Ç –Ω–∞–º –ø—Ä–∏–º–µ–Ω—è—Ç—å —Ç–æ—Ç –∂–µ –¥–µ–∫–ª–∞—Ä–∞—Ç–∏–≤–Ω—ã–π –ø–æ–¥—Ö–æ–¥ –∫ —ç—Ñ—Ñ–µ–∫—Ç–∞–º:

  ```javascript
   // Describes every interval state
  useInterval(() => {
    setCount(count + 1);
  }, isRunning ? delay : null);
  ```
–ú—ã –Ω–µ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∏–Ω—Ç–µ—Ä–≤–∞–ª, –Ω–æ —É–∫–∞–∑—ã–≤–∞–µ–º, —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –ª–∏ –æ–Ω –∏ —Å –∫–∞–∫–æ–π –∑–∞–¥–µ—Ä–∂–∫–æ–π. –ù–∞—à –ö—Ä—é–∫ –¥–µ–ª–∞–µ—Ç —ç—Ç–æ –≤–æ–∑–º–æ–∂–Ω—ã–º. –ù–µ–ø—Ä–µ—Ä—ã–≤–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å –æ–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –≤ –¥–∏—Å–∫—Ä–µ—Ç–Ω—ã—Ö —Ç–µ—Ä–º–∏–Ω–∞—Ö.

**–ù–∞–ø—Ä–æ—Ç–∏–≤, `setInterval` –Ω–µ –æ–ø–∏—Å—ã–≤–∞–µ—Ç –ø—Ä–æ—Ü–µ—Å—Å –≤–æ –≤—Ä–µ–º–µ–Ω–∏ - –∫–∞–∫ —Ç–æ–ª—å–∫–æ –≤—ã —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∏–Ω—Ç–µ—Ä–≤–∞–ª, –≤—ã –Ω–∏—á–µ–≥–æ –Ω–µ —Å–º–æ–∂–µ—Ç–µ –∏–∑–º–µ–Ω–∏—Ç—å, –∫—Ä–æ–º–µ –∫–∞–∫ –æ—á–∏—Å—Ç–∏—Ç—å –µ–≥–æ.**

–≠—Ç–æ –Ω–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –º–µ–∂–¥—É –º–æ–¥–µ–ª—å—é React –∏ API `setInterval`.

<hr/>

Props –∏ state –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ React –º–æ–≥—É—Ç –º–µ–Ω—è—Ç—å—Å—è. React –≤—ã–ø–æ–ª–Ω–∏—Ç –ø–æ–≤—Ç–æ—Ä–Ω—É—é –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—é –∏ ¬´–∑–∞–±—É–¥–µ—Ç¬ª –≤—Å–µ –æ –ø—Ä–µ–¥—ã–¥—É—â–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏. –≠—Ç–æ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –Ω–µ–∞–∫—Ç—É–∞–ª—å–Ω—ã–º.

–•—É–∫ `useEffect ()` —Ç–∞–∫–∂–µ ¬´–∑–∞–±—ã–≤–∞–µ—Ç¬ª –ø—Ä–µ–¥—ã–¥—É—â–∏–π —Ä–µ–Ω–¥–µ—Ä. –û–Ω –æ—á–∏—â–∞–µ—Ç –ø–æ—Å–ª–µ–¥–Ω–∏–π —ç—Ñ—Ñ–µ–∫—Ç –∏ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç —Å–ª–µ–¥—É—é—â–∏–π —ç—Ñ—Ñ–µ–∫—Ç. –°–ª–µ–¥—É—é—â–∏–π —ç—Ñ—Ñ–µ–∫—Ç –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è –ø–æ–≤–µ—Ä—Ö —Å–≤–µ–∂–µ–≥–æ —Ä–µ–∫–≤–∏–∑–∏—Ç–∞ –∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è. –í–æ—Ç –ø–æ—á–µ–º—É –Ω–∞—à–∞ –ø–µ—Ä–≤–∞—è –ø–æ–ø—ã—Ç–∫–∞ —Å—Ä–∞–±–æ—Ç–∞–ª–∞ –¥–ª—è –ø—Ä–æ—Å—Ç—ã—Ö —Å–ª—É—á–∞–µ–≤.

**–ù–æ `setInterval ()` –Ω–µ ¬´–∑–∞–±—ã–≤–∞–µ—Ç¬ª.** –û–Ω –±—É–¥–µ—Ç –≤—Å–µ–≥–¥–∞ —Å—Å—ã–ª–∞—Ç—å—Å—è –Ω–∞ —Å—Ç–∞—Ä—ã–µ —Ä–µ–∫–≤–∏–∑–∏—Ç—ã –∏ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –¥–æ —Ç–µ—Ö –ø–æ—Ä, –ø–æ–∫–∞ –≤—ã –Ω–µ –∑–∞–º–µ–Ω–∏—Ç–µ –∏—Ö - —á—Ç–æ –≤—ã –Ω–µ —Å–º–æ–∂–µ—Ç–µ —Å–¥–µ–ª–∞—Ç—å –±–µ–∑ —Å–±—Ä–æ—Å–∞ –≤—Ä–µ–º–µ–Ω–∏.

–ò–ª–∏ –∂–¥–∞—Ç—å, –∞ —Ç—ã?

<hr/>

## –°—Å—ã–ª–∫–∞ –Ω–∞ —Å–ø–∞—Å–µ–Ω–∏–µ! ##

–ü—Ä–æ–±–ª–µ–º–∞ —Å–≤–æ–¥–∏—Ç—Å—è –∫ —Å–ª–µ–¥—É—é—â–µ–º—É:

* –ú—ã –¥–µ–ª–∞–µ–º `setInterval (callback1, delay)` —Å `callback1` –∏–∑ –ø–µ—Ä–≤–æ–≥–æ —Ä–µ–Ω–¥–µ—Ä–∞.
* –£ –Ω–∞—Å –µ—Å—Ç—å `callback2` –∏–∑ —Å–ª–µ–¥—É—é—â–µ–≥–æ —Ä–µ–Ω–¥–µ—Ä–∞, –∫–æ—Ç–æ—Ä—ã–π –∑–∞–∫—Ä—ã–≤–∞–µ—Ç —Å–≤–µ–∂–∏–µ —Ä–µ–∫–≤–∏–∑–∏—Ç—ã –∏ —Å–æ—Å—Ç–æ—è–Ω–∏–µ.
* –ù–æ –º—ã –Ω–µ –º–æ–∂–µ–º –∑–∞–º–µ–Ω–∏—Ç—å —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –∏–Ω—Ç–µ—Ä–≤–∞–ª –±–µ–∑ —Å–±—Ä–æ—Å–∞ –≤—Ä–µ–º–µ–Ω–∏!

**–¢–∞–∫ –∞ —á—Ç–æ, –µ—Å–ª–∏ –º—ã –≤–æ–æ–±—â–µ –Ω–µ –∑–∞–º–µ–Ω–∏–ª–∏ –∏–Ω—Ç–µ—Ä–≤–∞–ª, –∞ –≤–º–µ—Å—Ç–æ —ç—Ç–æ–≥–æ –≤–≤–µ–ª–∏ –∏–∑–º–µ–Ω—è–µ–º—É—é –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é `saveCallback`, —É–∫–∞–∑—ã–≤–∞—é—â—É—é –Ω–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–π –∏–Ω—Ç–µ—Ä–≤–∞–ª—å–Ω—ã–π –æ–±—Ä–∞—Ç–Ω—ã–π –≤—ã–∑–æ–≤?**

–¢–µ–ø–µ—Ä—å –º—ã –º–æ–∂–µ–º —É–≤–∏–¥–µ—Ç—å —Ä–µ—à–µ–Ω–∏–µ:

* –ú—ã —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º `setInterval (fn, delay)`, –≥–¥–µ `fn` –≤—ã–∑—ã–≤–∞–µ—Ç `saveCallback`.
* –£—Å—Ç–∞–Ω–æ–≤–ª–∏–≤–∞–µ–º `saveCallback` –Ω–∞ `callback1` –ø–æ—Å–ª–µ –ø–µ—Ä–≤–æ–≥–æ —Ä–µ–Ω–¥–µ—Ä–∞.
* –£—Å—Ç–∞–Ω–æ–≤–ª–∏–≤–∞–µ–º `saveCallback` –Ω–∞ `callback2` –ø–æ—Å–ª–µ —Å–ª–µ–¥—É—é—â–µ–≥–æ —Ä–µ–Ω–¥–µ—Ä–∞.
* ???
* PROFIT

–≠—Ç–æ—Ç –∏–∑–º–µ–Ω—è–µ–º—ã–π `savedCallback` –¥–æ–ª–∂–µ–Ω '—Å–æ—Ö—Ä–∞–Ω—è—Ç—å—Å—è' –ø—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–º —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–µ. –¢–∞–∫ —á—Ç–æ —ç—Ç–æ –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –æ–±—ã—á–Ω–æ–π –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π. –ú—ã —Ö–æ—Ç–∏–º —á—Ç–æ-—Ç–æ –±–æ–ª–µ–µ –ø–æ—Ö–æ–∂–µ–µ –Ω–∞ –ø–æ–ª–µ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞.

[–ö–∞–∫ –º—ã –º–æ–∂–µ–º —É–∑–Ω–∞—Ç—å –∏–∑ Hooks FAQ](https://reactjs.org/docs/hooks-faq.html#is-there-something-like-instance-variables "React-oficial Is there something like instance variables?"), `useRef()` –¥–∞–µ—Ç –Ω–∞–º –∏–º–µ–Ω–Ω–æ —ç—Ç–æ:

 ```javascript
  const savedCallback = useRef();
  // { current: null }
 ```

*(–í–æ–∑–º–æ–∂–Ω–æ, –≤—ã –∑–Ω–∞–∫–æ–º—ã —Å —Å—Å—ã–ª–∫–∞–º–∏ [DOM refs](https://reactjs.org/docs/refs-and-the-dom.html "React -oficial Refs and the DOM") –≤ React. –•—É–∫–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç —Ç—É –∂–µ –∫–æ–Ω—Ü–µ–ø—Ü–∏—é –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –ª—é–±—ã—Ö –∏–∑–º–µ–Ω—è–µ–º—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π. –°—Å—ã–ª–∫–∞ –ø–æ—Ö–æ–∂–∞ –Ω–∞ ¬´–∫–æ—Ä–æ–±–∫—É¬ª, –≤ –∫–æ—Ç–æ—Ä—É—é –≤—ã –º–æ–∂–µ—Ç–µ –ø–æ–º–µ—Å—Ç–∏—Ç—å —á—Ç–æ —É–≥–æ–¥–Ω–æ.)*

`useRef()` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø—Ä–æ—Å—Ç–æ–π –æ–±—ä–µ–∫—Ç —Å –∏–∑–º–µ–Ω—è–µ–º—ã–º —Ç–µ–∫—É—â–∏–º —Å–≤–æ–π—Å—Ç–≤–æ–º, –∫–æ—Ç–æ—Ä–æ–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å–æ–≤–º–µ—Å—Ç–Ω–æ –¥–ª—è –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏. –ú—ã –º–æ–∂–µ–º —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤ –Ω–µ–º –ø–æ—Å–ª–µ–¥–Ω–∏–π –∏–Ω—Ç–µ—Ä–≤–∞–ª—å–Ω—ã–π –æ–±—Ä–∞—Ç–Ω–æ–≥–æ –≤—ã–∑–æ–≤–∞:

```javascript
  function callback() {
    // Can read fresh props, state, etc.
    setCount(count + 1);
  }

  // After every render, save the latest callback into our ref.
  useEffect(() => {
    savedCallback.current = callback;
  });
```
–ò —Ç–æ–≥–¥–∞ –º—ã –º–æ–∂–µ–º –ø—Ä–æ—á–∏—Ç–∞—Ç—å –∏ –≤—ã–∑–≤–∞—Ç—å –µ–≥–æ –∏–∑ –Ω–∞—à–µ–≥–æ –∏–Ω—Ç–µ—Ä–≤–∞–ª–∞:
```javascript
  useEffect(() => {
    function tick() {
      savedCallback.current();
    }

    let id = setInterval(tick, 1000);
    return () => clearInterval(id);
  }, []
```
–ë–ª–∞–≥–æ–¥–∞—Ä—è `[]` –Ω–∞—à —ç—Ñ—Ñ–µ–∫—Ç –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –ø–æ–≤—Ç–æ—Ä—è–µ—Ç—Å—è, –∏ –∏–Ω—Ç–µ—Ä–≤–∞–ª –Ω–µ —Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç—Å—è. –û–¥–Ω–∞–∫–æ, –±–ª–∞–≥–æ–¥–∞—Ä—è —Å—Å—ã–ª–∫–µ –Ω–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–π –≤—ã–∑–æ–≤, –º—ã –≤—Å–µ–≥–¥–∞ –º–æ–∂–µ–º –ø—Ä–æ—á–∏—Ç–∞—Ç—å –æ–±—Ä–∞—Ç–Ω—ã–π –≤—ã–∑–æ–≤, –∫–æ—Ç–æ—Ä—ã–π –º—ã —É—Å—Ç–∞–Ω–æ–≤–∏–ª–∏ –ø–æ—Å–ª–µ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞, –∏ –≤—ã–∑–≤–∞—Ç—å –µ–≥–æ —Å –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–º.

–í–æ—Ç –ø–æ–ª–Ω–æ–µ —Ä–∞–±–æ—á–µ–µ —Ä–µ—à–µ–Ω–∏–µ:

```javascript
function Counter() {
  const [count, setCount] = useState(0);
  const savedCallback = useRef();

  function callback() {
    setCount(count + 1);
  }

  useEffect(() => {
    savedCallback.current = callback;
  });

  useEffect(() => {
    function tick() {
      savedCallback.current();
    }

    let id = setInterval(tick, 1000);
    return () => clearInterval(id);
  }, []);

  return <h1>{count}</h1>;
}
```
*(–°–º. –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–æ–Ω–Ω—É—é –≤–µ—Ä—Å–∏—é [CodeSandbox](https://codesandbox.io/s/3499qqr565).)*

<hr>

# –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –∫—Ä—é–∫–∞ (Hook) #

–°–ª–µ–¥—É–µ—Ç –ø—Ä–∏–∑–Ω–∞—Ç—å, —á—Ç–æ –ø—Ä–∏–≤–µ–¥–µ–Ω–Ω—ã–π –≤—ã—à–µ –∫–æ–¥ –º–æ–∂–µ—Ç –¥–µ–∑–æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å. –≠—Ç–æ —Å–º–µ—à–Ω–æ, —á—Ç–æ–±—ã —Å–º–µ—à–∞—Ç—å –ø—Ä–æ—Ç–∏–≤–æ–ø–æ–ª–æ–∂–Ω—ã–µ –ø–∞—Ä–∞–¥–∏–≥–º—ã. –¢–∞–∫–∂–µ –µ—Å—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∏—Å–ø–æ—Ä—Ç–∏—Ç—å –∏–∑–º–µ–Ω—á–∏–≤—ã–µ —Å—Å—ã–ª–∫–∏.

**–Ø –¥—É–º–∞—é, —á—Ç–æ —Ö—É–∫–∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—é—Ç –ø—Ä–∏–º–∏—Ç–∏–≤—ã –±–æ–ª–µ–µ –Ω–∏–∑–∫–æ–≥–æ —É—Ä–æ–≤–Ω—è, —á–µ–º –∫–ª–∞—Å—Å—ã, –Ω–æ –∏—Ö –ø—Ä–µ–ª–µ—Å—Ç—å –≤ —Ç–æ–º, —á—Ç–æ –æ–Ω–∏ –ø–æ–∑–≤–æ–ª—è—é—Ç –Ω–∞–º —Å–æ–∑–¥–∞–≤–∞—Ç—å –∏ —Å–æ–∑–¥–∞–≤–∞—Ç—å –ª—É—á—à–∏–µ –¥–µ–∫–ª–∞—Ä–∞—Ç–∏–≤–Ω—ã–µ –∞–±—Å—Ç—Ä–∞–∫—Ü–∏–∏.**

–í –∏–¥–µ–∞–ª–µ —è –ø—Ä–æ—Å—Ç–æ —Ö–æ—á—É –Ω–∞–ø–∏—Å–∞—Ç—å —ç—Ç–æ:

```javascript
function Counter() {
  const [count, setCount] = useState(0);

  useInterval(() => {
    setCount(count + 1);
  }, 1000);

  return <h1>{count}</h1>;
}
```
–Ø —Å–∫–æ–ø–∏—Ä—É—é –∏ –≤—Å—Ç–∞–≤–ª—é —Ç–µ–ª–æ –º–æ–µ–≥–æ –º–µ—Ö–∞–Ω–∏–∑–º–∞ ref –≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π Hook:

```javascript
function useInterval(callback) {
  const savedCallback = useRef();

  useEffect(() => {
    savedCallback.current = callback;
  });

  useEffect(() => {
    function tick() {
      savedCallback.current();
    }

    let id = setInterval(tick, 1000);
    return () => clearInterval(id);
  }, []);
}
```
–í –Ω–∞—Å—Ç–æ—è—â–µ–µ –≤—Ä–µ–º—è –∑–∞–¥–µ—Ä–∂–∫–∞ `1000` –∂–µ—Å—Ç–∫–æ –∑–∞–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∞. –Ø —Ö–æ—á—É —Å–¥–µ–ª–∞—Ç—å —ç—Ç–æ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–º:

```javascript
function useInterval(callback, delay) {
```
–Ø –±—É–¥—É –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –µ–≥–æ –ø—Ä–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ –∏–Ω—Ç–µ—Ä–≤–∞–ª–∞:

```javascript
  let id = setInterval(tick, delay);
```
–¢–µ–ø–µ—Ä—å, –∫–æ–≥–¥–∞ –∑–∞–¥–µ—Ä–∂–∫–∞ –º–æ–∂–µ—Ç –º–µ–Ω—è—Ç—å—Å—è –º–µ–∂–¥—É —Ä–µ–Ω–¥–µ—Ä–∞–º–∏, –º–Ω–µ –Ω—É–∂–Ω–æ –æ–±—ä—è–≤–∏—Ç—å –µ–µ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –º–æ–µ–≥–æ —ç—Ñ—Ñ–µ–∫—Ç–∞ –∏–Ω—Ç–µ—Ä–≤–∞–ª–∞:

```javascript
   useEffect(() => {
    function tick() {
      savedCallback.current();
    }

    let id = setInterval(tick, delay);
    return () => clearInterval(id);
  }, [delay]);
```
–ü–æ–¥–æ–∂–¥–∏—Ç–µ, —Ä–∞–∑–≤–µ –º—ã –Ω–µ —Ö–æ—Ç–∏–º –∏–∑–±–µ–∂–∞—Ç—å —Å–±—Ä–æ—Å–∞ —ç—Ñ—Ñ–µ–∫—Ç–∞ –∏–Ω—Ç–µ—Ä–≤–∞–ª–∞ –∏ —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ –ø–µ—Ä–µ–¥–∞–µ–º `[]`, —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å –µ–≥–æ? –ù–µ —Å–æ–≤—Å–µ–º. –ú—ã —Ç–æ–ª—å–∫–æ —Ö–æ—Ç–µ–ª–∏ –∏–∑–±–µ–∂–∞—Ç—å –µ–≥–æ —Å–±—Ä–æ—Å–∞ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –æ–±—Ä–∞—Ç–Ω–æ–≥–æ –≤—ã–∑–æ–≤–∞. –ù–æ –∫–æ–≥–¥–∞ –∑–∞–¥–µ—Ä–∂–∫–∞ –º–µ–Ω—è–µ—Ç—Å—è, –º—ã —Ö–æ—Ç–∏–º –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å —Ç–∞–π–º–µ—Ä!

–î–∞–≤–∞–π—Ç–µ –ø—Ä–æ–≤–µ—Ä–∏–º, —Ä–∞–±–æ—Ç–∞–µ—Ç –ª–∏ –Ω–∞—à –∫–æ–¥:

```javascript
function Counter() {
  const [count, setCount] = useState(0);

  useInterval(() => {
    setCount(count + 1);
  }, 1000);

  return <h1>{count}</h1>;
}

function useInterval(callback, delay) {
  const savedCallback = useRef();

  useEffect(() => {
    savedCallback.current = callback;
  });

  useEffect(() => {
    function tick() {
      savedCallback.current();
    }

    let id = setInterval(tick, delay);
    return () => clearInterval(id);
  }, [delay]);
}
```
*(–°–º. –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–æ–Ω–Ω—É—é –≤–µ—Ä—Å–∏—é [CodeSandbox](https://codesandbox.io/s/xvyl15375w).)*

–≠—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç! –¢–µ–ø–µ—Ä—å –º—ã –º–æ–∂–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `useInterval()` –≤ –ª—é–±–æ–º –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ –∏ –Ω–µ —Å–ª–∏—à–∫–æ–º –∑–∞–¥—É–º—ã–≤–∞—Ç—å—Å—è –æ –¥–µ—Ç–∞–ª—è—Ö –µ–≥–æ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏.

## –ë–æ–Ω—É—Å: –ø—Ä–∏–æ—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏–Ω—Ç–µ—Ä–≤–∞–ª–∞ ##

–ê–≤—Ç–æ—Ä —Å—Ç–∞—Ç—å–∏ [Dan Abramov](https://overreacted.io/making-setinterval-declarative-with-react-hooks/) –û—Ä–∏–≥–∏–Ω–∞–ª —Å—Ç–∞—Ç—å–∏ –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ —Å—Å—ã–ª–∫–µ.<br/> –ê–≤—Ç–æ—Ä –ø–µ—Ä–µ–≤–æ–¥–∞ [Yaroslav Kolesnikov](https://github.com/YaroslavW)