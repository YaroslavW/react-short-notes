# –î–µ–ª–∞–µ–º setInterval –¥–µ–∫–ª–∞—Ä–∞—Ç–∏–≤–Ω—ã–º —Å –ø–æ–º–æ—â—å—é React Hooks #

–ï—Å–ª–∏ –≤—ã –∏–≥—Ä–∞–ª–∏ —Å [React Hooks](https://reactjs.org/docs/hooks-intro.html "React-docs") –±–æ–ª–µ–µ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —á–∞—Å–æ–≤, –≤—ã, –≤–µ—Ä–æ—è—Ç–Ω–æ, —Å—Ç–æ–ª–∫–Ω—É–ª–∏—Å—å —Å –∏–Ω—Ç—Ä–∏–≥—É—é—â–µ–π –ø—Ä–æ–±–ª–µ–º–æ–π: –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ setInterval [–Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç](https://stackoverflow.com/questions/53024496/state-not-updating-when-using-react-state-hook-within-setinterval "StackOverflow - State not updating when using React state hook within setInterval") —Ç–∞–∫, –∫–∞–∫ –≤—ã –æ–∂–∏–¥–∞–µ—Ç–µ.

[–ü–æ —Å–ª–æ–≤–∞–º](https://mobile.twitter.com/ryanflorence/status/1088606583637061634 "Twitter - Ryan Florence") Ryan Florence:

>–£ –º–µ–Ω—è –±—ã–ª–æ –º–Ω–æ–≥–æ –ª—é–¥–µ–π, —É–∫–∞–∑—ã–≤–∞—é—â–∏—Ö –Ω–∞ setInterval —Å —Ö—É–∫–∞–º–∏–∏, –∫–∞–∫ –Ω–∞ —è–π—Ü–µ –Ω–∞ –ª–∏—Ü–µ React.

–ß–µ—Å—Ç–Ω–æ –≥–æ–≤–æ—Ä—è, —è –¥—É–º–∞—é, —á—Ç–æ —É —ç—Ç–∏—Ö –ª—é–¥–µ–π –µ—Å—Ç—å —Å–º—ã—Å–ª. –°–Ω–∞—á–∞–ª–∞ —ç—Ç–æ —Å–±–∏–≤–∞–µ—Ç —Å —Ç–æ–ª–∫—É.

–ù–æ —è —Ç–∞–∫–∂–µ –ø—Ä–∏—à–µ–ª –∫ –≤—ã–≤–æ–¥—É, —á—Ç–æ —ç—Ç–æ –Ω–µ –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ–∫ —Ö—É–∫–æ–≤, –∞ –Ω–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –º–µ–∂–¥—É [–º–æ–¥–µ–ª—å—é –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è React](https://overreacted.io/react-as-a-ui-runtime/ "Dan Abramov - React as a UI Runtime") –∏ `setInterval`. –•—É–∫–∏, –±—É–¥—É—á–∏ –±–ª–∏–∂–µ –∫ –º–æ–¥–µ–ª–∏ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è React, —á–µ–º –∫ –∫–ª–∞—Å—Å–∞–º, –¥–µ–ª–∞—é—Ç —ç—Ç–æ –Ω–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –±–æ–ª–µ–µ –∑–∞–º–µ—Ç–Ω—ã–º

**–ï—Å—Ç—å —Å–ø–æ—Å–æ–± –∑–∞—Å—Ç–∞–≤–∏—Ç—å –∏—Ö —Ä–∞–±–æ—Ç–∞—Ç—å –≤–º–µ—Å—Ç–µ –æ—á–µ–Ω—å —Ö–æ—Ä–æ—à–æ, –Ω–æ —ç—Ç–æ –Ω–µ–º–Ω–æ–≥–æ –Ω–µ –∏–Ω—Ç—É–∏—Ç–∏–≤–Ω–æ –ø–æ–Ω—è—Ç–Ω–æ.**

–í —ç—Ç–æ–º –ø–æ—Å—Ç–µ –º—ã —Ä–∞—Å—Å–º–æ—Ç—Ä–∏–º, –∫–∞–∫ —Å–¥–µ–ª–∞—Ç—å –∏–Ω—Ç–µ—Ä–≤–∞–ª—ã –∏ Hooks, –∏ –∑–∞—Å—Ç–∞–≤–∏—Ç—å –∏–∑ —Ä–∞–±–æ—Ç–∞—Ç—å  –≤–º–µ—Å—Ç–µ, –ø–æ—á–µ–º—É —ç—Ç–æ —Ä–µ—à–µ–Ω–∏–µ –∏–º–µ–µ—Ç —Å–º—ã—Å–ª, –∏ –∫–∞–∫–∏–µ –Ω–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –æ–Ω–æ –º–æ–∂–µ—Ç –¥–∞—Ç—å –≤–∞–º.

<hr>

**–û—Ç–∫–∞–∑ –æ—Ç –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏: —ç—Ç–æ—Ç –ø–æ—Å—Ç –ø–æ—Å–≤—è—â–µ–Ω** ***–ø–∞—Ç–æ–ª–æ–≥–∏—á–µ—Å–∫–æ–º—É —Å–ª—É—á–∞—é***. **–î–∞–∂–µ –µ—Å–ª–∏ API —É–ø—Ä–æ—â–∞–µ—Ç —Å–æ—Ç–Ω—é –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è, –æ–±—Å—É–∂–¥–µ–Ω–∏–µ –≤—Å–µ–≥–¥–∞ –±—É–¥–µ—Ç —Å–æ—Å—Ä–µ–¥–æ—Ç–æ—á–µ–Ω–æ –Ω–∞ —Ç–æ–º, —á—Ç–æ —Å—Ç–∞–ª–æ —Å–ª–æ–∂–Ω–µ–µ.**

–ï—Å–ª–∏ –≤—ã –Ω–æ–≤–∏—á–æ–∫ –≤ Hooks –∏ –Ω–µ –ø–æ–Ω–∏–º–∞–µ—Ç–µ, –æ —á–µ–º –∏–¥–µ—Ç —Ä–µ—á—å, –æ–∑–Ω–∞–∫–æ–º—å—Ç–µ—Å—å [—Å —ç—Ç–∏–º –≤–≤–µ–¥–µ–Ω–∏–µ–º](https://medium.com/@dan_abramov/making-sense-of-react-hooks-fdbde8803889 "Dan Abramov - Making Sense of React Hooks") –∏ [–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–µ–π](https://reactjs.org/docs/hooks-intro.html "React-docs"). –í —ç—Ç–æ–º –ø–æ—Å—Ç–µ –ø—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ—Ç—Å—è, —á—Ç–æ –≤—ã —Ä–∞–±–æ—Ç–∞–ª–∏ —Å Hooks –±–æ–ª–µ–µ —á–∞—Å–∞.

<hr>

## –ü—Ä–æ—Å—Ç–æ –ø–æ–∫–∞–∂–∏ –º–Ω–µ –∫–æ–¥ ##

–ë–µ–∑ –ª–∏—à–Ω–∏—Ö —Å–ª–æ–≤, –≤–æ—Ç —Å—á–µ—Ç—á–∏–∫, –∫–æ—Ç–æ—Ä—ã–π —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç—Å—è –∫–∞–∂–¥—É—é —Å–µ–∫—É–Ω–¥—É:

```javascript
import React, { useState, useEffect, useRef } from 'react';

function Counter() {
  let [count, setCount] = useState(0);

  useInterval(() => {
    // Your custom logic here
    setCount(count + 1);
  }, 1000);

  return <h1>{count}</h1>;
}
```
–ó–¥–µ—Å—å [CodeSandbox demo.](https://codesandbox.io/s/105x531vkq "CodeSandbox").

–≠—Ç–æ—Ç useInterval –Ω–µ —è–≤–ª—è–µ—Ç—Å—è –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–º React Hook; —ç—Ç–æ [custom Hook](https://reactjs.org/docs/hooks-custom.html), –∫–æ—Ç–æ—Ä—ã–π —è –Ω–∞–ø–∏—Å–∞–ª:

```javascript
import React, { useState, useEffect, useRef } from 'react';

function useInterval(callback, delay) {
  const savedCallback = useRef();

  // Remember the latest callback.
  useEffect(() => {
    savedCallback.current = callback;
  }, [callback]);

  // Set up the interval.
  useEffect(() => {
    function tick() {
      savedCallback.current();
    }
    if (delay !== null) {
      let id = setInterval(tick, delay);
      return () => clearInterval(id);
    }
  }, [delay]);
}
```
–ó–¥–µ—Å—å [CodeSandbox demo.](https://codesandbox.io/s/105x531vkq "CodeSandbox").

**–ú–æ–π `useInterval` Hook —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –∏–Ω—Ç–µ—Ä–≤–∞–ª –∏ –æ—á–∏—â–∞–µ—Ç –µ–≥–æ –ø–æ—Å–ª–µ —Ä–∞–∑–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏—è.** –≠—Ç–æ –∫–æ–º–±–∏–Ω–∞—Ü–∏—è `setInterval` –∏ `clearInterval`, –ø—Ä–∏–≤—è–∑–∞–Ω–Ω–∞—è –∫ –∂–∏–∑–Ω–µ–Ω–Ω–æ–º—É —Ü–∏–∫–ª—É –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞.

–ù–µ —Å—Ç–µ—Å–Ω—è–π—Ç–µ—Å—å —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å, –≤—Å—Ç–∞–≤–∏—Ç—å –µ–≥–æ –≤ —Å–≤–æ–π –ø—Ä–æ–µ–∫—Ç –∏–ª–∏ –ø–æ—Å—Ç–∞–≤–∏—Ç—å –Ω–∞ npm.

**–ï—Å–ª–∏ –≤–∞–º –≤—Å–µ —Ä–∞–≤–Ω–æ, –∫–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç, –≤—ã –º–æ–∂–µ—Ç–µ –ø–µ—Ä–µ—Å—Ç–∞—Ç—å —á–∏—Ç–∞—Ç—å —Å–µ–π—á–∞—Å! –û—Å—Ç–∞–ª—å–Ω–∞—è —á–∞—Å—Ç—å –ø–æ—Å—Ç–∞ –≤ –±–ª–æ–≥–µ –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–∞ –¥–ª—è –ª—é–¥–µ–π, –∫–æ—Ç–æ—Ä—ã–µ –≥–æ—Ç–æ–≤—ã –≥–ª—É–±–æ–∫–æ –ø–æ–≥—Ä—É–∑–∏—Ç—å—Å—è –≤ React Hooks.**

<hr/>

## –ß–µ–≥–æ –∂–¥–∞—Ç—å?! ##

–Ø –∑–Ω–∞—é, –æ —á–µ–º –≤—ã –¥—É–º–∞–µ—Ç–µ:

>–î—ç–Ω, —ç—Ç–æ—Ç –∫–æ–¥ –Ω–µ –∏–º–µ–µ—Ç –Ω–∏–∫–∞–∫–æ–≥–æ —Å–º—ã—Å–ª–∞. –ß—Ç–æ —Å–ª—É—á–∏–ª–æ—Å—å —Å ¬´–ü—Ä–æ—Å—Ç–æ JavaScript¬ª? –ü—Ä–∏–∑–Ω–∞–π—Ç–µ, —á—Ç–æ –†–µ–∞–∫—Ç –ø–µ—Ä–µ–ø—Ä—ã–≥–Ω—É–ª –∞–∫—É–ª—É —Å Hooks (–ö—Ä—é—á–∫–∞–º–∏)!

**–Ø —Ç–æ–∂–µ —Ç–∞–∫ –¥—É–º–∞–ª, –Ω–æ –ø–µ—Ä–µ–¥—É–º–∞–ª –∏ —Å–æ–±–∏—Ä–∞—é—Å—å –∏–∑–º–µ–Ω–∏—Ç—å —Å–≤–æ–µ –º–Ω–µ–Ω–∏–µ.** –ü—Ä–µ–∂–¥–µ —á–µ–º –æ–±—ä—è—Å–Ω–∏—Ç—å, –ø–æ—á–µ–º—É —ç—Ç–æ—Ç –∫–æ–¥ –∏–º–µ–µ—Ç —Å–º—ã—Å–ª, —è —Ö–æ—á—É –ø–æ–∫–∞–∑–∞—Ç—å, –Ω–∞ —á—Ç–æ –æ–Ω —Å–ø–æ—Å–æ–±–µ–Ω.

<hr/>

## –ü–æ—á–µ–º—É `useInterval ()` - –ª—É—á—à–∏–π API ##

–ù–∞–ø–æ–º–Ω—é, —á—Ç–æ –º–æ–π `useInterval` Hook –ø—Ä–∏–Ω–∏–º–∞–µ—Ç —Ñ—É–Ω–∫—Ü–∏—é –∏ –∑–∞–¥–µ—Ä–∂–∫—É:

```javascript
  useInterval(() => {
    // ...
  }, 1000);
```
–≠—Ç–æ –æ—á–µ–Ω—å –ø–æ—Ö–æ–∂–µ –Ω–∞ setInterval:

```javascript
  setInterval(() => {
    // ...
  }, 1000);
```
**–¢–∞–∫ –ø–æ—á–µ–º—É –±—ã –ø—Ä–æ—Å—Ç–æ –Ω–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å setInterval –Ω–∞–ø—Ä—è–º—É—é?**

–ü–æ–Ω–∞—á–∞–ª—É —ç—Ç–æ –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ–æ—á–µ–≤–∏–¥–Ω–æ, –Ω–æ —Ä–∞–∑–Ω–∏—Ü–∞ –º–µ–∂–¥—É –∏–∑–≤–µ—Å—Ç–Ω—ã–º –≤–∞–º `setInterval` –∏ –º–æ–∏–º —Ö–∞–∫–æ–º `useInterval` –∑–∞–∫–ª—é—á–∞–µ—Ç—Å—è –≤ —Ç–æ–º, —á—Ç–æ –µ–≥–æ **–∞—Ä–≥—É–º–µ–Ω—Ç—ã —è–≤–ª—è—é—Ç—Å—è ¬´–¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–º–∏¬ª**.

–Ø –ø—Ä–æ–∏–ª–ª—é—Å—Ç—Ä–∏—Ä—É—é —ç—Ç–æ –Ω–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º –ø—Ä–∏–º–µ—Ä–µ.

–î–æ–ø—É—Å—Ç–∏–º, –º—ã —Ö–æ—Ç–∏–º, —á—Ç–æ–±—ã –∑–∞–¥–µ—Ä–∂–∫–∞ –∏–Ω—Ç–µ—Ä–≤–∞–ª–∞ –±—ã–ª–∞ —Ä–µ–≥—É–ª–∏—Ä—É–µ–º–æ–π:

![react-counter](img/counter_delay-35e4f35a8585255b11c090aed9f72433.gif)

–ù–µ—Å–º–æ—Ç—Ä—è –Ω–∞ —Ç–æ, —á—Ç–æ –≤—ã –Ω–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ —É–ø—Ä–∞–≤–ª—è–µ—Ç–µ –∑–∞–¥–µ—Ä–∂–∫–æ–π —Å –ø–æ–º–æ—â—å—é –≤–≤–æ–¥–∞, –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø–æ–ª–µ–∑–Ω–æ–π - –Ω–∞–ø—Ä–∏–º–µ—Ä, —Ä–µ–∂–µ –∑–∞–ø—Ä–∞—à–∏–≤–∞—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è AJAX, –ø–æ–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–µ—Ä–µ–∫–ª—é—á–∞–µ—Ç—Å—è –Ω–∞ –¥—Ä—É–≥—É—é –≤–∫–ª–∞–¥–∫—É.

–ò—Ç–∞–∫, –∫–∞–∫ –±—ã –≤—ã —Å–¥–µ–ª–∞–ª–∏ —ç—Ç–æ —Å setInterval –≤ –∫–ª–∞—Å—Å–µ? –Ø –∑–∞–∫–æ–Ω—á–∏–ª —Å —ç—Ç–∏–º:

```javascript
class Counter extends React.Component {
  state = {
    count: 0,
    delay: 1000,
  };

  componentDidMount() {
    this.interval = setInterval(this.tick, this.state.delay);
  }
  componentDidUpdate(prevProps, prevState) {
    if (prevState.delay !== this.state.delay) {
      clearInterval(this.interval);
      this.interval = setInterval(this.tick, this.state.delay);
    }
  }
  componentWillUnmount() {
    clearInterval(this.interval);
  }
  tick = () => {
    this.setState({
      count: this.state.count + 1
    });
  }

  handleDelayChange = (e) => {
    this.setState({ delay: Number(e.target.value) });
  }

  render() {
    return (
      <>
        <h1>{this.state.count}</h1>
        <input value={this.state.delay} onChange={this.handleDelayChange} />
      </>
    );
  }
}
```
–ó–¥–µ—Å—å [CodeSandbox demo.](https://codesandbox.io/s/mz20m600mp "CodeSandbox").

–≠—Ç–æ –Ω–µ —Ç–∞–∫ —É–∂ –ø–ª–æ—Ö–æ!

–ö–∞–∫ –≤—ã–≥–ª—è–¥–∏—Ç –≤–µ—Ä—Å–∏—è Hook?

ü•Åü•Åü•Å
```javascript
function Counter() {
  let [count, setCount] = useState(0);
  let [delay, setDelay] = useState(1000);

  useInterval(() => {
    // Your custom logic here
    setCount(count + 1);
  }, delay);

  function handleDelayChange(e) {
    setDelay(Number(e.target.value));
  }

  return (
    <>
      <h1>{count}</h1>
      <input value={delay} onChange={handleDelayChange} />
    </>
  );
}
```
–ó–¥–µ—Å—å [CodeSandbox demo.](https://codesandbox.io/s/329jy81rlm "CodeSandbox").

–î–∞, —ç—Ç–æ _–≤—Å–µ, —á—Ç–æ –Ω—É–∂–Ω–æ_.

–í –æ—Ç–ª–∏—á–∏–µ –æ—Ç –≤–µ—Ä—Å–∏–∏ –∫–ª–∞—Å—Å–∞, –≤ ¬´–æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏¬ª –ø—Ä–∏–º–µ—Ä–∞ –ª–æ–≤—É—à–∫–∏ `useInterval` –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç —Ä–∞–∑—Ä—ã–≤ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º–æ–π –∑–∞–¥–µ—Ä–∂–∫–∏:

```javascript
  // Constant delay
  useInterval(() => {
    setCount(count + 1);
  }, 1000);

  // Adjustable delay
  useInterval(() => {
    setCount(count + 1);
  }, delay);
```
–ö–æ–≥–¥–∞ `useInterval` Hook –≤–∏–¥–∏—Ç –¥—Ä—É–≥—É—é –∑–∞–¥–µ—Ä–∂–∫—É, –æ–Ω —Å–Ω–æ–≤–∞ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –∏–Ω—Ç–µ—Ä–≤–∞–ª.

**–í–º–µ—Å—Ç–æ —Ç–æ–≥–æ —á—Ç–æ–±—ã –ø–∏—Å–∞—Ç—å –∫–æ–¥ –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –∏** ***–æ—á–∏—Å—Ç–∫–∏***  **–∏–Ω—Ç–µ—Ä–≤–∞–ª–∞, —è –º–æ–≥—É –æ–±—ä—è–≤–∏—Ç—å –∏–Ω—Ç–µ—Ä–≤–∞–ª —Å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–π –∑–∞–¥–µ—Ä–∂–∫–æ–π - –∏ –Ω–∞—à `useInterval` Hook –¥–µ–ª–∞–µ—Ç —ç—Ç–æ –≤–æ–∑–º–æ–∂–Ω—ã–º.**

–ß—Ç–æ –µ—Å–ª–∏ —è —Ö–æ—á—É _–≤—Ä–µ–º–µ–Ω–Ω–æ –ø—Ä–∏–æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å_ —Å–≤–æ–π –∏–Ω—Ç–µ—Ä–≤–∞–ª? –Ø –º–æ–≥—É —Å–¥–µ–ª–∞—Ç—å —ç—Ç–æ —Å–æ state —Ç–æ–∂–µ:

```javascript
  const [delay, setDelay] = useState(1000);
  const [isRunning, setIsRunning] = useState(true);

  useInterval(() => {
    setCount(count + 1);
  }, isRunning ? delay : null);
```
–ó–¥–µ—Å—å [CodeSandbox demo.](https://codesandbox.io/s/l240mp2pm7 "CodeSandbox").

–≠—Ç–æ —Ç–æ, —á—Ç–æ –≤–¥–æ—Ö–Ω–æ–≤–ª—è–µ—Ç –º–µ–Ω—è –Ω–∞ Hooks –∏ React —Å–Ω–æ–≤–∞ –∏ —Å–Ω–æ–≤–∞. –ú—ã –º–æ–∂–µ–º –æ–±–µ—Ä–Ω—É—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –∏–º–ø–µ—Ä–∞—Ç–∏–≤–Ω—ã–µ API –∏ —Å–æ–∑–¥–∞—Ç—å –¥–µ–∫–ª–∞—Ä–∞—Ç–∏–≤–Ω—ã–µ API, –±–æ–ª–µ–µ –±–ª–∏–∑–∫–æ –≤—ã—Ä–∞–∂–∞—é—â–∏–µ –Ω–∞—à–∏ –Ω–∞–º–µ—Ä–µ–Ω–∏—è. –ö–∞–∫ –∏ –≤ —Å–ª—É—á–∞–µ —Å —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–æ–º, –º—ã –º–æ–∂–µ–º –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ **–æ–ø–∏—Å—ã–≤–∞—Ç—å –ø—Ä–æ—Ü–µ—Å—Å –≤–æ –≤—Å–µ –º–æ–º–µ–Ω—Ç—ã –≤—Ä–µ–º–µ–Ω–∏** –≤–º–µ—Å—Ç–æ —Ç–æ–≥–æ, —á—Ç–æ–±—ã –∞–∫–∫—É—Ä–∞—Ç–Ω–æ –≤—ã–¥–∞–≤–∞—Ç—å –∫–æ–º–∞–Ω–¥—ã –¥–ª—è –µ–≥–æ –º–∞–Ω–∏–ø—É–ª–∏—Ä–æ–≤–∞–Ω–∏—è.

<hr/>

–Ø –Ω–∞–¥–µ—é—Å—å, —á—Ç–æ –±–ª–∞–≥–æ–¥–∞—Ä—è —ç—Ç–æ–º—É –≤—ã –ø—Ä–æ–¥–∞–µ—Ç–µ –Ω–∞ `useInterval ()` Hook, –∫–æ—Ç–æ—Ä—ã–π —è–≤–ª—è–µ—Ç—Å—è –±–æ–ª–µ–µ –ø—Ä–∏—è—Ç–Ω—ã–º API - –ø–æ –∫—Ä–∞–π–Ω–µ–π –º–µ—Ä–µ, –∫–æ–≥–¥–∞ –º—ã –¥–µ–ª–∞–µ–º —ç—Ç–æ –∏–∑ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞.

**–ù–æ –ø–æ—á–µ–º—É –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `setInterval ()` –∏ `clearInterval ()` —Ä–∞–∑–¥—Ä–∞–∂–∞–µ—Ç —Ö—É–∫–∏?** –î–∞–≤–∞–π—Ç–µ –≤–µ—Ä–Ω–µ–º—Å—è –∫ –Ω–∞—à–µ–º—É –ø—Ä–∏–º–µ—Ä—É –∏ –ø–æ–ø—Ä–æ–±—É–µ–º —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –µ–≥–æ –≤—Ä—É—á–Ω—É—é.

<hr/>

## –ü–µ—Ä–≤–∞—è –ø–æ–ø—ã—Ç–∫–∞ ##

–Ø –Ω–∞—á–Ω—É —Å –ø—Ä–æ—Å—Ç–æ–≥–æ –ø—Ä–∏–º–µ—Ä–∞, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–æ—Å—Ç–æ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –∏—Å—Ö–æ–¥–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ:

```javascript
function Counter() {
  const [count, setCount] = useState(0);
  return <h1>{count}</h1>;
}
```
–¢–µ–ø–µ—Ä—å —è —Ö–æ—á—É –∏–Ω—Ç–µ—Ä–≤–∞–ª, –∫–æ—Ç–æ—Ä—ã–π —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç –µ–≥–æ –∫–∞–∂–¥—É—é —Å–µ–∫—É–Ω–¥—É. –≠—Ç–æ [–ø–æ–±–æ—á–Ω—ã–π —ç—Ñ—Ñ–µ–∫—Ç](https://reactjs.org/docs/hooks-effect.html#effects-with-cleanup "React-docs Effects with Cleanup"), –∫–æ—Ç–æ—Ä—ã–π [—Ç—Ä–µ–±—É–µ—Ç –æ—á–∏—Å—Ç–∫–∏](https://reactjs.org/docs/hooks-effect.html#effects-with-cleanup "React-docs Effects with Cleanup"), –ø–æ—ç—Ç–æ–º—É —è —Å–æ–±–∏—Ä–∞—é—Å—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Effect () –∏ –≤–µ—Ä–Ω—É—Ç—å —Ñ—É–Ω–∫—Ü–∏—é –æ—á–∏—Å—Ç–∫–∏:

```javascript
function Counter() {
  let [count, setCount] = useState(0);

  useEffect(() => {
    let id = setInterval(() => {
      setCount(count + 1);
    }, 1000);
    return () => clearInterval(id);
  });

  return <h1>{count}</h1>;
}
```
–ó–¥–µ—Å—å [CodeSandbox demo.](https://codesandbox.io/s/7wlxk1k87j "CodeSandbox").

–ö–∞–∂–µ—Ç—Å—è –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ø—Ä–æ—Å—Ç–æ? –≠—Ç–æ—Ç –≤–∏–¥ —Ä–∞–±–æ—Ç.

**–û–¥–Ω–∞–∫–æ, —ç—Ç–æ—Ç –∫–æ–¥ –∏–º–µ–µ—Ç —Å—Ç—Ä–∞–Ω–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ.**

React –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –ø–æ–≤—Ç–æ—Ä–Ω–æ –ø—Ä–∏–º–µ–Ω—è–µ—Ç —ç—Ñ—Ñ–µ–∫—Ç—ã –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ —Ä–µ–Ω–¥–µ—Ä–∞. –≠—Ç–æ —Å–¥–µ–ª–∞–Ω–æ –Ω–∞–º–µ—Ä–µ–Ω–Ω–æ –∏ –ø–æ–º–æ–≥–∞–µ—Ç –∏–∑–±–µ–∂–∞—Ç—å [—Ü–µ–ª–æ–≥–æ –∫–ª–∞—Å—Å–∞ –æ—à–∏–±–æ–∫](https://reactjs.org/docs/hooks-effect.html#explanation-why-effects-run-on-each-update "React-docs Explanation: Why Effects Run on Each Update"), –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—â–∏—Ö –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö –∫–ª–∞—Å—Å–∞ React.

–û–±—ã—á–Ω–æ —ç—Ç–æ —Ö–æ—Ä–æ—à–æ, –ø–æ—Ç–æ–º—É —á—Ç–æ –º–Ω–æ–≥–∏–µ API-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã –ø–æ–¥–ø–∏—Å–∫–∏ –º–æ–≥—É—Ç —É–¥–∞—á–Ω–æ —É–¥–∞–ª–∏—Ç—å —Å—Ç–∞—Ä—ã–π –∏ –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π –ø—Ä–æ—Å–ª—É—à–∏–≤–∞—Ç–µ–ª—å –≤ –ª—é–±–æ–µ –≤—Ä–µ–º—è. –û–¥–Ω–∞–∫–æ `setInterval` –Ω–µ —è–≤–ª—è–µ—Ç—Å—è –æ–¥–Ω–∏–º –∏–∑ –Ω–∏—Ö. –ö–æ–≥–¥–∞ –º—ã –∑–∞–ø—É—Å–∫–∞–µ–º `clearInterval` –∏ `setInterval`, –∏—Ö —Å—Ä–æ–∫–∏ –º–µ–Ω—è—é—Ç—Å—è. –ï—Å–ª–∏ –º—ã —Å–ª–∏—à–∫–æ–º —á–∞—Å—Ç–æ –ø–µ—Ä–µ—Ä–∏—Å–æ–≤—ã–≤–∞–µ–º –∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ –ø—Ä–∏–º–µ–Ω—è–µ–º —ç—Ñ—Ñ–µ–∫—Ç—ã, –∏–Ω—Ç–µ—Ä–≤–∞–ª –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –±—É–¥–µ—Ç –ø–æ–ª—É—á–µ–Ω!

–ú—ã –º–æ–∂–µ–º —É–≤–∏–¥–µ—Ç—å –æ—à–∏–±–∫—É, –ø–µ—Ä–µ—Ä–∏—Å–æ–≤–∞–≤ –Ω–∞—à –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –≤ _–º–µ–Ω—å—à–∏–π_ –∏–Ω—Ç–µ—Ä–≤–∞–ª:

```javascript
setInterval(() => {
  // Re-renders and re-applies Counter's effects
  // which in turn causes it to clearInterval()
  // and setInterval() before that interval fires.
  ReactDOM.render(<Counter />, rootElement);
}, 100);
```
–ó–¥–µ—Å—å [CodeSandbox demo.](https://codesandbox.io/s/9j86r218y4 "CodeSandbox").

<hr/>

## –í—Ç–æ—Ä–∞—è –ø–æ–ø—ã—Ç–∫–∞ ##


–ê–≤—Ç–æ—Ä —Å—Ç–∞—Ç—å–∏ [Dan Abramov](https://overreacted.io/making-setinterval-declarative-with-react-hooks/) –û—Ä–∏–≥–∏–Ω–∞–ª —Å—Ç–∞—Ç—å–∏ –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ —Å—Å—ã–ª–∫–µ.<br/> –ê–≤—Ç–æ—Ä –ø–µ—Ä–µ–≤–æ–¥–∞ [Yaroslav Kolesnikov](https://github.com/YaroslavW)