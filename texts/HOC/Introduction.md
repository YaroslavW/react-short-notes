# Введение в компоненты высшего порядка (HOC) #

*Проще говоря, функция высшего порядка, это функция, которая принимает функцию в качестве параметра или возвращает новую функцию. В контексте React компоненты высшего порядка - это компоненты, которые принимают компонент в качестве входных данных и возвращают другой компонент в качестве выходных данных.*<br/>

**Компоненты высшего порядка** принимают компонент в качестве входных данных и возвращают новый компонент, который оборачивает исходный компонент. Компонент оболочки может предоставлять некоторые дополнительные данные или функциональные возможности исходному компоненту, взятому в качестве входных данных.<br/>

Когда мы работаем с несколькими компонентами в нашем приложении, могут быть сценарии, в которых некоторая часть компонента может использоваться повторно (**например, выполняется асинхронный вызов данных**). Компоненты высшего порядка предназначены для извлечения общей части кода в качестве оболочки, которая может быть повторно использована другими компонентами.<br/>

Сложная природа React позволяет нам создавать компоненты, содержащие дополнительные подкомпоненты. Простым примером композиции будет простая веб-страница, содержащая несколько компонентов, таких как `<HeaderComponent />`, `<FooterComponent />`, `<NavigationComponent />` и `<ContentContainer />`. Все эти компоненты объединяются в одну веб-страницу.<br/>

Мы рассмотрим пример кода, который содержит 2 компонента, каждый компонент требует, чтобы некоторые данные отображались пользователю. В указанном сценарии данные, необходимые для этих компонентов, доступны из одного вызова функции. Поскольку извлечение данных для компонентов осуществляется из одного и того же кода, мы можем попытаться извлечь код, который занимается извлечением данных. Сначала давайте посмотрим на компоненты, которые необходимы. Мы будем определять два компонента, которые требуют различных полей для визуализации.<br/>

```javascript
  import React from "react";

  export default function ShowEmployeeBasicDetails(props) {
      return (
          <div>
              <p>Employee Name: {props.name}</p>
              <p>Employee Age: {props.age}</p>
              <p>Employee Designation: {props.designation}</p>
          </div>
      )
  }

```
Приведенный выше код создает простой функциональный компонент, который принимает базовые данные сотрудника в качестве входного параметра (`props`) и отображает основные данные сотрудника (`name`, `age`, `description`). Поэтому входные реквизиты должны иметь указанные свойства.<br/>

```javascript
  import React from "react";

  export default function ShowEmployeeSalaryDetails(props) {
      return (
          <div>
              <p>Employee Name: {props.name}</p>
              <p>Employee Salary: {props.salary}</p>
              <p>Employee Bonus: {props.bonus}</p>
          </div>
      )
  }

```
Мы создаем еще один компонент, указанный выше, который отображает информацию о зарплате сотрудника для пользователя. Этот функциональный компонент принимает параметры `props` в качестве входных данных и отображает информацию о зарплате пользователю (`salsry` и `bonus`).<br/>

Оба эти компонента ожидают объектный литерал, содержащий обязательные поля. Компонент `<ShowEmployeeBasicDetails />` ожидает, что свойства «name», «age» и «description» будут доступны в объекте `props`. А компонент `<ShowEmployeeSalaryDetails />` ожидает свойства «salary» и «bonus» как часть `props` объекта.<br/>

Давайте предположим, что у нас есть одна функция, которая выбирает детали, которые требуются обоим компонентам и содержит все обязательные поля.<br/>

```javascript
  function getEmployeeData() {
      return {
          name: "Mayank",
          age: 30,
          designation: "Developer",
          salary: 30000,
          bonus: 2000
      }
  }

```
Теперь, поскольку данные, требуемые обоими компонентами, доступны из одного вызова функции, мы можем повторно использовать код для извлечения данных для обоих компонентов. Повторно используемый код может быть отделен как отдельный компонент-обертка, которому наши основные компоненты могут быть переданы в качестве параметра. Этот компонент-оболочка обеспечивает дополнительную функциональность для извлечения данных и предоставления этих данных любому компоненту, который передается в качестве параметра. (`ShowEmployeeBasicDetails` and `ShowEmployeeSalaryDetails`). Функция-оболочка (wrapper function) и называется компонентом высшего порядка - **Higher Order Component**.<br/>

```javascript
  import React from "react";

  function getEmployeeData() {
      return {
          name: "Mayank",
          age: 30,
          designation: "Developer",
          salary: 30000,
          bonus: 2000
      }
  }

  var HigherOrderComponent = function(WrappedComponent) {
      return class EmployeeDetailComponents extends React.Component {

          constructor() {
              super();
              this.state = getEmployeeData();
          }
      
          render() {
              return (
                  <div>
                      <WrappedComponent {...this.state}></WrappedComponent>
                  </div>
              )
          }
      }
  }

  var EmployeeBasicDetails = HigherOrderComponent(ShowEmployeeBasicDetails);

  var EmployeeSalaryDetails = HigherOrderComponent(ShowEmployeeSalaryDetails);

```
В приведенном выше коде мы создали функцию **«HigherOrderComponent»**, которая принимает компонент в качестве входных данных и возвращает другой компонент. Когда рендерит возвращенный Компонент, функция конструктора выполняет общую задачу извлечения общих данных для компонентов, данные предоставляются обернутым компонентам как `props`.<br/>

Позвольте мне объяснить материал еще раз: компоненты **«ShowEmployeeBasicDetails»** и **«ShowEmployeeSalaryDetails»** передаются в качестве входных данных для компонента-оболочки (wrapped components). Эти (wrapped components)  компоненты ожидают данных `props`. Конструктор, указанный в функции-обертке, делает вызовы функций для извлечения данных и сохраняет данные в переменную состояния, и эти данные становятся доступными для компонентов. И, следовательно, сократить код, поскольку оба компонента не должны иметь отдельный код для выборки данных в каждом компоненте.<br/>

Компоненты высшего порядка обеспечивают превосходный способ обернуть общие функции в один компонент-обертку и сделать их доступными для обернутого компонента (компоненты, переданные в качестве параметра)<br/>

Надеюсь, что статья смогла прояснить основы компонентов высшего порядка.

Автор статьи [Mayank Gupta](https://levelup.gitconnected.com/introduction-to-reacts-higher-order-components-hocs-c42182fb634?fbclid=IwAR2tHezT91N1W6HCtzwbkP7uZOKDFf-fAUo4Xvy3V_yTgJXbQ3e9hn0Z9Dg) Оригинал статьи доступен по ссылке.<br/> Автор перевода [Yaroslav Kolesnikov](https://github.com/YaroslavW)
